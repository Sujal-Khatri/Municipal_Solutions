{% extends 'base.html' %}

{% block content %}
<h1>Welcome to Municipal Solutions</h1>
{% if user.is_authenticated %}
    {% if user.is_admin %}
        <div class="alert alert-info">
            You have admin privileges. <a href="/admin/">Access admin panel</a>
        </div>
    {% endif %}
{% else %}
    <p>Please <a href="{% url 'login' %}">login</a> or <a href="{% url 'register' %}">register</a> to access services.</p>
{% endif %}

<a href="{% url 'discussions' %}" class="btn btn-primary mt-3">Discussions</a>
<h2 class="text-center mt-4">ðŸ“¢ Latest Discussions</h2>

<div class="scroll-box">
    <div class="scroll-content">
        {% for post in latest_posts %}
        <div class="scroll-item">
            <strong>{{ post.title }}</strong><br>
            <small>By {{ post.author.username }} | {{ post.created_at|date:"M d, Y H:i" }}</small><br>
            <a href="{% url 'post_detail' post.id %}">View Post â†’</a>
        </div>
        {% empty %}
        <p>No discussions available.</p>
        {% endfor %}
    </div>
</div>
<style>
.scroll-box {
    height: 200px;
    overflow: hidden;
    border: 2px solid #ccc;
    border-radius: 10px;
    padding: 10px;
    background-color: #fdfdfd;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    position: relative;
}

.scroll-content {
    display: flex;
    flex-direction: column;
    animation: scrollUp 20s linear infinite;
}

.scroll-item {
    padding: 10px 0;
    border-bottom: 1px solid #eee;
}

@keyframes scrollUp {
    0% { transform: translateY(0); }
    100% { transform: translateY(-100%); }
}
.scroll-box:hover .scroll-content {
    animation-play-state: paused;
}
</style>
{% endblock %}